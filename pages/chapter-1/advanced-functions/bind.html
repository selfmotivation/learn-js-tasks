<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Learn Javascript Solved Tasks</title>
  <link rel="stylesheet" href="../../../assets/css/article-page.css">
  <link rel="stylesheet" href="../../../assets/css/header.css">
  <link rel="stylesheet" href="../../../assets/css/sidebar.css">
</head>
<body>
  <header class="header">
    <a href="../../../index.html" class="logo">
      <span class="logo__text">Jav</span><img class="logo__img" src="../../../assets/img/logo.png" alt="logo"><span class="logo__text">script tasks</span>
    </a>
  </header>
  <sidebar class="sidebar">
    <h4 class="sidebar__title">Раздел главы</h4>
    <ul class="sidebar-list">
      <li class="sidebar-list__item">
        <a href="../advanced-functions.html" class="sidebar-list__link">Продвинутая работа с функциями</a>
      </li>
    </ul>
    <h4 class="sidebar__title">Статьи главы</h4>
    <ul class="sidebar-list">
      <li class="sidebar-list__item">
        <a class="sidebar-list__link" href="./recursion.html">Рекурсия и стек</a>
    </li>
    <li class="sidebar-list__item">
        <a class="sidebar-list__link" href="./rest-parameters-spread-operator.html">Остаточные параметры и оператор расширения</a>
      </li>
      <li class="sidebar-list__item">
          <a class="sidebar-list__link" href="./closure.html">Замыкание</a>
      </li>
      <li class="sidebar-list__item">
          <a class="sidebar-list__link" href="./var.html">Устаревшее ключевое слово "var"</a>
      </li>
      <li class="sidebar-list__item">
          <a class="sidebar-list__link" href="./global-object.html">Глобальный объект</a>
      </li>
      <li class="sidebar-list__item">
          <a class="sidebar-list__link" href="./function-object.html">Объект функции, NFE</a>
      </li>
      <li class="sidebar-list__item">
          <a class="sidebar-list__link" href="./new-function.html">Синтаксис "new Function"</a>
      </li>
      <li class="sidebar-list__item">
          <a class="sidebar-list__link" href="./settimeout-setinterval.html">Планирование: setTimeout и setInterval</a>
      </li>
      <li class="sidebar-list__item">
          <a class="sidebar-list__link" href="./call-apply-decorators.html">Декораторы и переадресация вызова, call/apply</a>
      </li>
      <li class="sidebar-list__item">
          <a class="sidebar-list__link" href="./bind.html">Привязка контекста к функции</a>
      </li>
      <li class="sidebar-list__item">
          <a class="sidebar-list__link" href="./arrow-functions.html">Повторяем стрелочные функции</a>
      </li>
    </ul>
  </sidebar>
  <main class="main">
    <h3 class="article-list__title title">
      Привязка контекста к функции
    </h3>
    <section class="tasks">
      <h4 class="tasks__title title">Задачи</h4>
      <div class="task">
        <div class="task__title">Связанная функция как метод</div>
        <p class="task-description">
          Что выведет функция?
        </p>
        <code class="task__code">
          <ol class="task__code-list">
            <li class="task__code-list__item task-list__item">function f() {</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;alert( this ); // ?</li>
            <li class="task__code-list__item task-list__item">}</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">let user = {</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;g: f.bind(null)/li>
            <li class="task__code-list__item task-list__item">};</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">user.g();</li>
          </ol>
        </code>
        <p class="task__solution">Решение:</p>
        <pre class="task__solution__code">
  <code>null</code>
        </pre>
      </div>
      <div class="task">
        <div class="task__title">Повторный bind</div>
        <p class="task-description">
          Можем ли мы изменить <code>this</code> дополнительным связыванием?
        </p>
        <p class="task-description">
          Что выведет этот код?
        </p>
        <code class="task__code">
          <ol class="task__code-list">
            <li class="task__code-list__item task-list__item">function f() {</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;alert(this.name);</li>
            <li class="task__code-list__item task-list__item">}</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">f = f.bind( {name: "Вася"} ).bind( {name: "Петя" } );</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">f();</li>
          </ol>
        </code>
        <p class="task__solution">Решение:</p>
        <pre class="task__solution__code">
  <code>Вася</code>
        </pre>
      </div>
      <div class="task">
        <div class="task__title">Свойство функции после bind</div>
        <p class="task-description">
          В свойство функции записано значение. Изменится ли оно после применения <code>bind</code>? Обоснуйте ответ.
        </p>
        <code class="task__code">
          <ol class="task__code-list">
            <li class="task__code-list__item task-list__item">function sayHi() {</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;alert( this.name );</li>
            <li class="task__code-list__item task-list__item">}</li>
            <li class="task__code-list__item task-list__item">sayHi.test = 5;</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">let bound = sayHi.bind({</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;name: "Вася"</li>
            <li class="task__code-list__item task-list__item">});</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">alert( bound.test ); // что выведет? почему?</li>
          </ol>
        </code>
        <p class="task__solution">Решение:</p>
        <pre class="task__solution__code">
  <code>undefined.

  Результатом работы bind является другой объект. У него уже нет свойства test.</code>
        </pre>
      </div>
      <div class="task">
        <div class="task__title">Исправьте функцию, теряющую "this"</div>
        <p class="task-description">
          Вызов <code>askPassword()</code> в приведённом ниже коде должен проверить пароль и затем вызвать <code>user.loginOk/loginFail</code> в зависимости от ответа.
        </p>
        <p class="task-description">
          Однако, его вызов приводит к ошибке. Почему?
        </p>
        <p class="task-description">
          Исправьте выделенную строку, чтобы всё работало (других строк изменять не надо).
        </p>
        <code class="task__code">
          <ol class="task__code-list">
            <li class="task__code-list__item task-list__item">function askPassword(ok, fail) {</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;let password = prompt("Password?", '');</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;if (password == "rockstar") ok();</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;else fail();</li>
            <li class="task__code-list__item task-list__item">}</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">let user = {</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;name: 'Вася',</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;loginOk() {</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;&nbsp;&nbsp;alert(`${this.name} logged in`);</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;},</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;loginFail() {</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;&nbsp;&nbsp;alert(`${this.name} failed to log in`);</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;},</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">};</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">askPassword(user.loginOk, user.loginFail);</li>
          </ol>
        </code>
        <p class="task__solution">Решение:</p>
        <pre class="task__solution__code">
  <code>askPassword(user.loginOk.bind(user), user.loginFail.bind(user));</code>
        </pre>
      </div>
      <div class="task">
        <div class="task__title">Использование частично применённой функции для логина</div>
        <p class="task-description">
          Это задание является немного усложнённым вариантом одного из предыдущих – Исправьте функцию, теряющую "this".
        </p>
        <p class="task-description">
          Объект <code>user</code> был изменён. Теперь вместо двух функций <code>loginOk/loginFail</code> у него есть только одна – <code>user.login(true/false)</code>.
        </p>
        <p class="task-description">
          Что нужно передать в вызов функции <code>askPassword</code> в коде ниже, чтобы она могла вызывать функцию <code>user.login(true)</code> как <code>ok</code> и функцию <code>user.login(false)</code> как <code>fail</code>?
        </p>
        <code class="task__code">
          <ol class="task__code-list">
            <li class="task__code-list__item task-list__item">function askPassword(ok, fail) {</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;let password = prompt("Password?", '');</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;if (password == "rockstar") ok();</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;else fail();</li>
            <li class="task__code-list__item task-list__item">}</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">let user = {</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;name: 'Вася',</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;loginOk() {</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;&nbsp;&nbsp;alert(`${this.name} logged in`);</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;},</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;loginFail() {</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;&nbsp;&nbsp;alert(`${this.name} failed to log in`);</li>
            <li class="task__code-list__item task-list__item">&nbsp;&nbsp;},</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">};</li>
            <li class="task__code-list__item task-list__item"></li>
            <li class="task__code-list__item task-list__item">askPassword(user.loginOk, user.loginFail);</li>
          </ol>
        </code>
        <p class="task-description">
          Ваши изменения должны затрагивать только выделенный фрагмент кода.
        </p>
        <p class="task__solution">Решение:</p>
        <pre class="task__solution__code">
  <code>askPassword(user.login.bind(user, true), user.login.bind(user, false));</code>
        </pre>
      </div>
    </section>
  </main>
</body>
</html>